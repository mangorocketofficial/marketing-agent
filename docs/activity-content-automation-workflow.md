# 활동 기반 자동 포스팅 워크플로우 (OpenClaw)

## 1. 목적

하나의 NGO 활동(예: 교육 프로그램, 캠페인, 봉사활동)을 중심으로  
아래 3종 마케팅 콘텐츠를 자동 생성/발행하는 운영 방식을 정의한다.

- 사전 홍보 포스팅 (행사 전)
- 활동 진행 상황 포스팅 (행사 중)
- 활동 후기 포스팅 (행사 후)

핵심 아이디어는 **OpenClaw가 프로젝트 폴더의 업데이트 파일을 감지**하고,  
이를 근거로 콘텐츠를 생성하는 것이다.

---

## 2. 기본 개념

### 2-1. 프로젝트 폴더 단위 운영

각 활동별로 하나의 폴더를 운영한다.

예시:

```txt
projects/{customerId}/{projectId}/
  00-plan/
  10-assets/
  20-live/
  30-retro/
```

- `00-plan`: 일정표, 행사 기획안, 홍보 핵심 메시지
- `10-assets`: 포스터, 현수막 문구, 공식 이미지, 보도자료
- `20-live`: 현장 메모, 사진 캡션, 진행 상황 로그
- `30-retro`: 결과 요약, 참가자 반응, 성과 지표

### 2-2. OpenClaw 직접 전체 탐색 금지

OpenClaw가 매번 파일시스템 전체를 직접 읽는 방식이 아니라,  
`ingest job`이 파일을 정규화해 저장한 결과를 조회하도록 한다.

---

## 3. 자동화 파이프라인

## 3-1. 파일 업데이트 감지

- 신규/수정 파일 감지 시 ingest queue 등록
- 이벤트 정보: `customerId`, `projectId`, `path`, `updatedAt`, `fileType`

## 3-2. Ingest 처리

1. 파일 파싱 (txt/md/pdf/docx/image 등)
2. 메타데이터 추출
3. 요약 생성
4. 청크 분할
5. 임베딩 생성
6. DB/벡터스토어 저장

저장 시 필수 메타데이터:

- customerId
- projectId
- sourcePath
- sourceType
- eventDate (가능한 경우)
- tags (예: `promotion`, `live`, `result`)
- updatedAt

## 3-3. 콘텐츠 생성 단계

OpenClaw는 콘텐츠 요청 시 다음 순서로 동작한다.

1. 콘텐츠 타입 결정  
   - `promotion` / `live` / `retrospective`
2. 관련 소스 검색 (RAG)  
   - projectId + 시간 범위 + 태그 기반 필터
3. 초안 생성  
   - 채널별 길이/톤/형식 반영
4. 근거 연결  
   - sourcePath/chunkId를 초안 메타에 기록
5. 승인 정책 적용  
   - 자동/반자동/수동 발행 결정

---

## 4. 일정 기반 콘텐츠 전략

## 4-1. 사전 홍보 포스팅 (행사 전)

입력 소스:

- 일정표
- 참가 대상
- 신청 방법
- 핵심 메시지/기대 효과

생성 포인트:

- 왜 참여해야 하는지 (가치)
- 언제/어디서/어떻게 참여하는지 (행동 유도)
- 마감/신청 링크

## 4-2. 활동 진행 포스팅 (행사 중)

입력 소스:

- 현장 메모
- 실시간 사진 캡션
- 진행 단계 로그

생성 포인트:

- 현재 어떤 활동이 진행 중인지
- 참여 분위기/현장감
- 즉시 참여 유도 메시지(가능한 경우)

## 4-3. 활동 후기 포스팅 (행사 후)

입력 소스:

- 결과 요약
- 참가자 반응
- 성과 지표
- 대표 사진

생성 포인트:

- 무엇을 했는지 (사실)
- 어떤 변화/의미가 있었는지 (해석)
- 다음 행동 제안 (후원/참여/공유)

---

## 5. 채널별 출력 규칙

- Next.js site: 긴 글(배경 + 과정 + 결과 + 다음 단계)
- 네이버 블로그: 운영팀 검수 전제의 상세형 본문
- 인스타그램: 짧은 본문 + 해시태그 + 이미지 중심
- 쓰레드: 핵심 메시지 위주의 짧은 문장 흐름

같은 활동이라도 채널별로 다른 길이/톤/CTA를 사용한다.

---

## 6. 사진 선택(vision) 규칙

Vision 기반 자동 선택 시 최소 규칙:

1. 행사 맥락 일치도 (주제 적합성)
2. 품질 점수 (초점/밝기/구도)
3. 중복도 제거 (유사 컷 제외)
4. 민감정보 필터 (얼굴/아동/개인정보 정책)
5. 채널 비율 적합성 (세로/정사각/가로)

결과는 “최종 1~3장 후보”로 제안하고 필요 시 운영자가 선택한다.

---

## 7. 승인 정책 (권장)

- 자동 발행:
  - 반복형 공지
  - 민감도 낮은 진행 요약
- 승인 후 발행:
  - 성과 수치 포함 콘텐츠
  - 대외 민감 주제
  - 대외 메시지 리스크가 있는 문안

---

## 8. 운영 지표 (KPI)

이 워크플로우가 잘 작동하는지 아래 지표로 판단한다.

- 콘텐츠 생성 성공률
- 승인 반려율
- 게시 일정 준수율
- 채널별 반응(조회/좋아요/공유/저장)
- 활동별 후기 발행 완성률

---

## 9. 요약

이 구조의 핵심은 다음 3가지다.

1. 파일 업데이트를 ingest로 정규화해 신뢰 가능한 근거를 만든다.
2. 일정(전/중/후)에 맞는 콘텐츠 타입으로 분리 생성한다.
3. 채널별 형식 + 승인 정책 + 피드백 루프로 품질을 높인다.

즉, 단순 “자동 글쓰기”가 아니라  
**활동 운영 데이터 기반의 콘텐츠 생산 시스템**으로 설계한다.
